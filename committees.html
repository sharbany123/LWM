<!-- ...existing code... -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Committees — Divisions & Districts | Liberation War Museum</title>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <style>
    /* Base / match index.html styling */
    :root {
      --text: #1a202c;
      --muted: #475569;
      --accent: rgba(212, 175, 55, 0.3);
      --card-bg: rgba(255, 255, 255, 0.85);
      --surface: #f8fafc;
      --glass: rgba(255, 255, 255, 0.6);
      --container-max: 1150px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    html,
    body {
      height: 100%
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--text);
      line-height: 1.6;
      background: linear-gradient(rgba(248, 250, 252, 0.7), rgba(226, 232, 240, 0.7)),
        url("https://www.tbsnews.net/sites/default/files/styles/infograph/public/images/2020/12/15/jadu_ghor_7-min.jpg");
      background-attachment: fixed;
      background-size: cover;
      background-position: center;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding-bottom: 4rem;
      overflow-x: hidden;
    }

    /* Header */
    .header {
      backdrop-filter: blur(6px);
      background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
      border-bottom: 1px solid rgb(255, 255, 255);
      position: sticky;
      top: 0;
      z-index: 40;
    }

    .nav {
      max-width: var(--container-max);
      margin: 0 auto;
      padding: 1rem 1.25rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: space-between;
    }

    .brand {
      display: flex;
      gap: .75rem;
      align-items: center;
    }

    .logo-icon {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.12);
    }

    .brand h1 {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      margin: 0
    }

    .brand p {
      font-size: .8rem;
      color: var(--muted);
      margin: 0
    }

    /* Page hero */
    .hero {
      max-width: var(--container-max);
      margin: 2.25rem auto 1rem;
      padding: 1.5rem 1.25rem;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(13, 15, 25, 0.06);
      border: 1px solid rgba(10, 10, 10, 0.04);
    }

    .hero h2 {
      font-family: 'Playfair Display', serif;
      margin-bottom: .25rem
    }

    .hero p {
      color: var(--muted);
      font-size: .95rem;
      margin-bottom: .5rem
    }

    /* Controls */
    .controls {
      display: flex;
      gap: .5rem;
      align-items: center;
      flex-wrap: wrap;
      margin-top: .75rem;
    }

    .role-btn {
      border: 1px solid rgba(10, 10, 10, 0.06);
      background: transparent;
      padding: .5rem .9rem;
      border-radius: 8px;
      cursor: pointer;
      color: var(--text);
      font-weight: 600;
      transition: all .15s ease;
    }

    .role-btn.active {
      background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
      color: white;
      box-shadow: 0 8px 26px rgba(99, 102, 241, 0.12);
      border-color: transparent;
    }

    .action-row {
      display: flex;
      gap: .5rem;
      margin-left: auto;
      align-items: center;
    }

    .btn {
      padding: .5rem .9rem;
      border-radius: 8px;
      border: 1px solid rgba(10, 10, 10, 0.06);
      cursor: pointer;
      background: white;
      font-weight: 600;
    }

    .btn.primary {
      background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
      color: #fff;
      border: transparent
    }

    .btn[disabled] {
      opacity: .45;
      cursor: not-allowed
    }

    /* Content container */
    .content {
      max-width: var(--container-max);
      margin: 1.25rem auto;
      padding: 1rem;
    }

    /* Grid of divisions */
    .divisions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      align-items: start;
      margin-bottom: 1.5rem;
    }

    .division-card {
      background: var(--glass);
      padding: 1rem;
      border-radius: 10px;
      border: 1px solid rgba(10, 10, 10, 0.04);
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.04);
    }

    .division-card h4 {
      margin-bottom: .25rem;
      font-size: 1rem
    }

    .division-card p {
      color: var(--muted);
      font-size: .9rem;
      margin-bottom: .5rem
    }

    /* Table constraining and design (reduced width) */
    .table-wrap {
      max-width: 900px;
      margin: 0 auto;
      background: var(--card-bg);
      border-radius: 10px;
      padding: 1rem;
      border: 1px solid rgba(10, 10, 10, 0.04);
      box-shadow: 0 8px 26px rgba(13, 15, 25, 0.04);
      overflow: hidden;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      display: block;
      overflow: auto;
      max-height: 420px;
    }

    .data-table thead th {
      text-align: left;
      padding: .75rem 1rem;
      background: linear-gradient(90deg, rgba(250, 250, 250, 0.9), rgba(245, 245, 250, 0.9));
      position: sticky;
      top: 0;
      font-weight: 700;
      border-bottom: 1px solid rgba(10, 10, 10, 0.04)
    }

    .data-table td {
      padding: .75rem 1rem;
      border-bottom: 1px dashed rgba(10, 10, 10, 0.04);
      font-size: .95rem;
      color: var(--muted)
    }

    .actions .icon-btn {
      background: transparent;
      border: 0;
      color: var(--muted);
      cursor: pointer;
      margin-left: .5rem
    }

    /* district list inside card */
    .district-list {
      list-style: none;
      padding-left: 0;
      margin-top: .6rem
    }

    .district-list li {
      background: rgba(255, 255, 255, 0.65);
      padding: .45rem .6rem;
      border-radius: 6px;
      margin-bottom: .4rem;
      color: var(--muted);
      font-size: .95rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* small screens */
    @media (max-width:820px) {

      .hero,
      .content {
        margin-left: 1rem;
        margin-right: 1rem
      }

      .table-wrap {
        max-width: 100%
      }
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, 0.6);
      z-index: 120;
      opacity: 0;
      pointer-events: none;
      transition: opacity .18s ease;
    }

    .modal-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    .modal {
      width: 520px;
      max-width: 94%;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 18px 50px rgba(2, 6, 23, 0.35);
      padding: 1rem;
      transform: translateY(10px) scale(.99);
      transition: transform .18s ease;
      border: 1px solid rgba(10, 10, 10, 0.04);
    }

    .modal-overlay.open .modal {
      transform: translateY(0) scale(1);
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: .5rem
    }

    .modal-title {
      font-weight: 700;
      font-size: 1.05rem;
      font-family: 'Playfair Display', serif
    }

    .modal-step-indicator {
      color: var(--muted);
      font-size: .85rem
    }

    .form-group {
      margin: .5rem 0;
      display: flex;
      flex-direction: column
    }

    .form-group label {
      font-size: .85rem;
      margin-bottom: .25rem;
      color: var(--text)
    }

    .form-group input,
    .form-group select {
      padding: .55rem .65rem;
      border-radius: 8px;
      border: 1px solid rgba(10, 10, 10, 0.06);
      font-size: .95rem;
      background: rgba(255, 255, 255, 0.95)
    }

    .form-actions {
      display: flex;
      gap: .5rem;
      justify-content: flex-end;
      margin-top: .75rem
    }

    .btn.secondary {
      background: transparent;
      border: 1px solid rgba(10, 10, 10, 0.06)
    }

    .btn.ghost {
      background: transparent;
      border: 0;
      color: var(--muted);
      font-weight: 600
    }

    .form-step {
      display: none
    }

    .form-step.active {
      display: block
    }

    /* small tweaks */
    @media (max-width:520px) {
      .modal {
        padding: .8rem
      }

      .modal-title {
        font-size: 1rem
      }
    }
  </style>
</head>

<body>
  <header class="header" role="banner">
    <nav class="nav" role="navigation">
      <div class="brand">
        <div class="logo-icon"><i class="fa-solid fa-shield-halved"></i></div>
        <div>
          <h1 style="color: white;">Liberation War Museum</h1>
          <p style="color: #6e8ed3;">Committees — Divisions & Districts</p>
        </div>
      </div>

      <div style="display:flex;gap:.75rem;align-items:center">
        <a href="index.html" class="btn" title="Home"><i class="fa-solid fa-house"></i></a>
        <a href="admin.html" class="btn" title="Admin"><i class="fa-solid fa-user-gear"></i></a>
      </div>
    </nav>
  </header>

  <main>
    <section class="hero" aria-labelledby="hero-title">
      <h2 id="hero-title">Divisions & Districts — Committee Management</h2>
      <p>Select a managerial role to reveal allowed actions. The UI adapts to the role:</p>

      <div class="controls" role="toolbar" aria-label="Role selector">
        <button class="role-btn active" data-role="national">National Committee Manager</button>
        <button class="role-btn" data-role="division">Division Committee Manager</button>
        <button class="role-btn" data-role="district">District Committee Manager</button>
        <button class="role-btn" data-role="thana">Thana Committee Manager</button>

        <div class="action-row" aria-hidden="false">
          <button id="create-national" class="btn primary" title="Create National Committee">Create National</button>
          <button id="create-division" class="btn" title="Create Division Committee">Create Division</button>
          <button id="create-district" class="btn" title="Create District Committee">Create District</button>
        </div>
      </div>
    </section>

    <section class="content" aria-labelledby="divisions-title">
      <h3 id="divisions-title" style="margin-bottom:.5rem">Divisions</h3>

      <div class="divisions-grid" id="divisions-grid">
        <!-- sample divisions -->
        <div class="division-card">
          <h4>Dhaka Division</h4>
          <p>Districts: Dhaka, Gazipur, Manikganj, Tangail...</p>
          <div style="display:flex;justify-content:flex-end;">
            <button class="btn view-districts" data-division="dhaka" style="font-size:.85rem">View Districts</button>
          </div>
        </div>

        <div class="division-card">
          <h4>Chattogram Division</h4>
          <p>Districts: Chattogram, Cox's Bazar, Bandarban...</p>
          <div style="display:flex;justify-content:flex-end;">
            <button class="btn view-districts" data-division="chattogram" style="font-size:.85rem">View
              Districts</button>
          </div>
        </div>

        <div class="division-card">
          <h4>Khulna Division</h4>
          <p>Districts: Khulna, Jessore, Satkhira...</p>
          <div style="display:flex;justify-content:flex-end;">
            <button class="btn view-districts" data-division="khulna" style="font-size:.85rem">View Districts</button>
          </div>
        </div>

        <div class="division-card">
          <h4>Others</h4>
          <p>See more divisions for full list</p>
          <div style="display:flex;justify-content:flex-end;">
            <button class="btn view-districts" data-division="others" style="font-size:.85rem">View Districts</button>
          </div>
        </div>
      </div>

      <h3 style="margin:1.25rem 0 .5rem">Districts</h3>

      <div class="table-wrap" aria-live="polite">
        <table class="data-table" role="table" aria-label="Districts table">
          <thead>
            <tr>
              <th>District</th>
              <th>Division</th>
              <th>Location</th>
              <th style="width:160px">Actions</th>
            </tr>
          </thead>
          <tbody id="districts-body">
            <!-- sample rows -->
            <tr>
              <td>Dhaka</td>
              <td>Dhaka</td>
              <td>23.8103° N, 90.4125° E</td>
              <td class="actions">
                <button class="icon-btn" title="View"><i class="fa-solid fa-eye"></i></button>
                <button class="icon-btn" title="Edit"><i class="fa-solid fa-pen-to-square"></i></button>
              </td>
            </tr>
            <tr>
              <td>Gazipur</td>
              <td>Dhaka</td>
              <td>24.0048° N, 90.4203° E</td>
              <td class="actions">
                <button class="icon-btn" title="View"><i class="fa-solid fa-eye"></i></button>
                <button class="icon-btn" title="Edit"><i class="fa-solid fa-pen-to-square"></i></button>
              </td>
            </tr>
            <tr>
              <td>Chattogram</td>
              <td>Chattogram</td>
              <td>22.3569° N, 91.7832° E</td>
              <td class="actions">
                <button class="icon-btn" title="View"><i class="fa-solid fa-eye"></i></button>
                <button class="icon-btn" title="Edit"><i class="fa-solid fa-pen-to-square"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Modal: create committee (multi-step) -->
  <div id="committee-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true"
    aria-labelledby="modal-title">
    <div class="modal" role="document">
      <div class="modal-header">
        <div>
          <div id="modal-title" class="modal-title">Create Committee</div>
          <div id="modal-step" class="modal-step-indicator">Step 1 of 2</div>
        </div>
        <button id="modal-close" class="btn ghost" aria-label="Close">✕</button>
      </div>

      <form id="committee-form" novalidate>
        <!-- Step 1 -->
        <div class="form-step" data-step="1">
          <div class="form-group">
            <label for="committee-name">Committee Name</label>
            <input id="committee-name" name="committeeName" type="text" required />
          </div>

          <div class="form-group">
            <label for="committee-head">Committee Head Name</label>
            <input id="committee-head" name="committeeHead" type="text" required />
          </div>

          <div class="form-group">
            <label for="committee-division">Committee Division (location)</label>
            <input id="committee-division" name="committeeDivision" type="text" required />
          </div>

          <div class="form-group">
            <label for="committee-district">Committee District (location)</label>
            <input id="committee-district" name="committeeDistrict" type="text" required />
          </div>

          <div class="form-actions">
            <button type="button" id="cancel-step1" class="btn secondary">Cancel</button>
            <button type="button" id="next-to-step2" class="btn primary">Next</button>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="form-step" data-step="2">
          <div class="form-group">
            <label for="head-name-confirm">Head's Name</label>
            <input id="head-name-confirm" name="headNameConfirm" type="text" readonly />
          </div>

          <div class="form-group">
            <label for="head-contact-number">Contact Number</label>
            <input id="head-contact-number" name="headContact" type="tel" placeholder="+8801XXXXXXXXX" />
          </div>

          <div class="form-group">
            <label for="head-email">Email</label>
            <input id="head-email" name="headEmail" type="email" placeholder="name@example.com" />
          </div>

          <div class="form-group">
            <label for="head-phone">Phone Number (landline/alt)</label>
            <input id="head-phone" name="headPhone" type="tel" placeholder="02-XXXXXXXX" />
          </div>

          <div class="form-actions">
            <button type="button" id="cancel-step2" class="btn secondary">Cancel</button>
            <button type="button" id="back-to-step1" class="btn">Back</button>
            <button type="submit" id="submit-committee" class="btn primary">Submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Role permissions mapping:
    // national -> can create national, division, district
    // division -> create division, district
    // district -> create district
    // thana -> view only (no create)
    const perms = {
      national: { national: true, division: true, district: true },
      division: { national: false, division: true, district: true },
      district: { national: false, division: false, district: true },
      thana: { national: false, division: false, district: false }
    };

    const roleButtons = Array.from(document.querySelectorAll('.role-btn'));
    const createNational = document.getElementById('create-national');
    const createDivision = document.getElementById('create-division');
    const createDistrict = document.getElementById('create-district');

    function setRole(role) {
      roleButtons.forEach(b => b.classList.toggle('active', b.dataset.role === role));
      const p = perms[role] || perms.thana;
      createNational.disabled = !p.national;
      createDivision.disabled = !p.division;
      createDistrict.disabled = !p.district;

      // hide disabled actions visually for clarity
      createNational.style.display = p.national ? '' : 'none';
      createDivision.style.display = p.division ? '' : '';
      createDistrict.style.display = p.district ? '' : '';
    }

    roleButtons.forEach(btn => {
      btn.addEventListener('click', () => setRole(btn.dataset.role));
    });

    // initial state
    setRole('national');

    // Example: keep table constrained when new rows added
    function addDistrictRow(name, division, coords) {
      const tbody = document.getElementById('districts-body');
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${name}</td><td>${division}</td><td>${coords}</td>
        <td class="actions">
          <button class="icon-btn" title="View"><i class="fa-solid fa-eye"></i></button>
          <button class="icon-btn" title="Edit"><i class="fa-solid fa-pen-to-square"></i></button>
        </td>`;
      tbody.appendChild(tr);
    }

    // Hardcoded districts per division (three each)
    const districtsMap = {
      dhaka: ['Dhaka Sadar', 'Dhamrai', 'Keraniganj'],
      chattogram: ['Pahartali', 'Sitakunda', 'Rangunia'],
      khulna: ['Khulna Sadar', 'Batiaghata', 'Dumuria'],
      others: ['Barisal Sadar', 'Sylhet Sadar', 'Rangpur Sadar']
    };

    // Show/hide district list inside the division card
    document.querySelectorAll('.view-districts').forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.dataset.division;
        const card = btn.closest('.division-card');
        if (!card) return;

        const existing = card.querySelector('.district-list');
        if (existing) {
          existing.remove();
          btn.textContent = 'View Districts';
          return;
        }

        const list = document.createElement('ul');
        list.className = 'district-list';
        (districtsMap[key] || []).forEach(d => {
          const li = document.createElement('li');
          li.textContent = d;
          list.appendChild(li);
        });

        card.appendChild(list);
        btn.textContent = 'Hide Districts';
      });
    });

    // Modal logic (multi-step create committee)
    (function () {
      const modalOverlay = document.getElementById('committee-modal');
      const form = document.getElementById('committee-form');
      const steps = Array.from(form.querySelectorAll('.form-step'));
      const stepIndicator = document.getElementById('modal-step');
      const closeBtn = document.getElementById('modal-close');

      // fields
      const fldName = document.getElementById('committee-name');
      const fldHead = document.getElementById('committee-head');
      const fldDivision = document.getElementById('committee-division');
      const fldDistrict = document.getElementById('committee-district');
      const fldHeadConfirm = document.getElementById('head-name-confirm');
      const fldContact = document.getElementById('head-contact-number');
      const fldEmail = document.getElementById('head-email');
      const fldPhone = document.getElementById('head-phone');

      let currentStep = 0; // 0-based index

      function showStep(index) {
        currentStep = Math.max(0, Math.min(steps.length - 1, index));
        steps.forEach((s, i) => s.classList.toggle('active', i === currentStep));
        stepIndicator.textContent = `Step ${currentStep + 1} of ${steps.length}`;
        modalOverlay.setAttribute('aria-hidden', 'false');
      }

      function openModal(prefill) {
        // prefill a suggested division if provided
        if (prefill && prefill.division) fldDivision.value = prefill.division;
        // reset fields if new open
        if (!prefill || !prefill.keep) {
          form.reset();
        }
        // ensure head confirm matches head on step change
        showStep(0);
        modalOverlay.classList.add('open');
        // focus first input
        setTimeout(() => fldName.focus(), 120);
      }

      function closeModal() {
        modalOverlay.classList.remove('open');
        modalOverlay.setAttribute('aria-hidden', 'true');
      }

      // wire create buttons
      const createNational = document.getElementById('create-national');
      const createDivision = document.getElementById('create-division');
      const createDistrict = document.getElementById('create-district');

      if (createNational) createNational.addEventListener('click', () => openModal({ division: 'National' }));
      if (createDivision) createDivision.addEventListener('click', () => openModal({ division: '' }));
      if (createDistrict) createDistrict.addEventListener('click', () => openModal({ division: '' }));

      // Next from step 1
      document.getElementById('next-to-step2').addEventListener('click', () => {
        // basic validation: required fields
        if (!fldName.value.trim()) { fldName.focus(); return alert('Please enter committee name.'); }
        if (!fldHead.value.trim()) { fldHead.focus(); return alert('Please enter committee head name.'); }
        if (!fldDivision.value.trim()) { fldDivision.focus(); return alert('Please enter committee division.'); }
        if (!fldDistrict.value.trim()) { fldDistrict.focus(); return alert('Please enter committee district.'); }

        // populate head confirm field and move to step 2
        fldHeadConfirm.value = fldHead.value.trim();
        showStep(1);
      });

      // Back
      document.getElementById('back-to-step1').addEventListener('click', () => {
        showStep(0);
      });

      // Cancel buttons
      document.getElementById('cancel-step1').addEventListener('click', closeModal);
      document.getElementById('cancel-step2').addEventListener('click', closeModal);
      closeBtn.addEventListener('click', closeModal);

      // Submit
      form.addEventListener('submit', (ev) => {
        ev.preventDefault();
        // simple validation: ensure email/phone/contact provided (optional)
        const payload = {
          committeeName: fldName.value.trim(),
          committeeHead: fldHead.value.trim(),
          committeeDivision: fldDivision.value.trim(),
          committeeDistrict: fldDistrict.value.trim(),
          headContact: fldContact.value.trim(),
          headEmail: fldEmail.value.trim(),
          headPhone: fldPhone.value.trim()
        };

        // For now just log and close. Replace with actual submit logic as needed.
        console.log('Committee submitted:', payload);

        // Add a visual confirmation (brief) then close
        alert('Committee submitted (check console).');
        closeModal();
      });

      // close on Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modalOverlay.classList.contains('open')) closeModal();
      });

      // close click outside modal (overlay)
      modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) closeModal();
      });

      // keep head confirm in sync when user edits head name on step1 and returns
      fldHead.addEventListener('input', () => {
        if (currentStep === 1) fldHeadConfirm.value = fldHead.value;
      });
    })();

    // Example usage (commented out)
    // addDistrictRow('New District', 'Dhaka', '23.0° N, 90.0° E');
  </script>
</body>

</html>